<!doctype html>
<html dir="ltr" lang="ja">
<script type="text/javascript" src="solver.js"></script>
<script type="text/javascript">

    const green = "rgb(83, 141, 78)"
    const yellow = "rgb(181, 159, 59)"
    const grey = "grey"
    const red = "red"

    function inputListener(obj) {
        const activeDoc = document.activeElement
        const activeIdx = activeDoc.id.replace("input", "")

        const value = (activeDoc.value + "     ").slice(0, 5)

        Array.from(value).forEach((char, charIdx) => {
            document.getElementById(`name${activeIdx}-${charIdx + 1}`).textContent = char;
        })
    }

    function changeColor(element) {

        const currentColor = element.style.backgroundColor
        nextColor = ""
        switch (currentColor) {
            case grey:
                nextColor = yellow;
                break
            case yellow:
                nextColor = green;
                break
            case green:
                nextColor = grey;
                break
            default:
                nextColor = red; // ここに入ることはないはず
        }
        element.style.backgroundColor = nextColor;
    }

    function init() {
        Array.from(document.getElementsByClassName("input")).forEach(element => element.addEventListener("input", inputListener))
        Array.from(document.getElementsByClassName("name-box")).forEach(element => {
            element.style.backgroundColor = grey;
            element.onclick = () => changeColor(element);
        })

    }

    window.addEventListener('load', init);
</script>


<head>
    <meta charset="utf-8">
    <title>Pokemon Wordle Solver</title>
    <style>
        @media screen and (min-aspect-ratio: 16/9) {
            #container {
                flex-direction: row;
                align-items: flex-start;
            }

            #input-area {
                flex-grow: 2;
            }

            #result-area {
                flex-grow: 1;
            }

            h1 {
                font-size: 2.5vw;
            }

            .name-box {
                font-size: 30px;
                height: 50px;
                width: 50px;
                margin-right: 10px;
            }

            .input {
                font-size: 2.5vh;
                width: 13vw;
                height: 3vh;
                text-align: center;
            }

            #button {
                width: 15vw;
                height: 6vh;
                font-size: 3vh;
            }

            #result-head {
                font-size: 3vh;
            }

            #result {
                font-size: 3vh;
            }
        }

        @media screen and (max-aspect-ratio: 16/9) {

            #container {
                flex-direction: column;
                /* align-items: flex-start; */
            }

            #input-area {
                flex-grow: 1;
            }

            #result-area {
                flex-grow: 1;
            }


            h1 {
                font-size: 6vw;
            }

            .name-box {
                font-size: 10vw;
                height: 14vw;
                width: 14vw;
                margin-right: 2vw;
            }


            .input {
                font-size: 2.5vh;
                width: 30vw;
                height: 3vh;
                text-align: center;
            }

            #button {
                width: 25vw;
                height: 5vh;
                font-size: 3vh;
            }

            #result-head {
                font-size: 6vw;
            }

            #result {
                font-size: 5vw;
            }
        }

        * {
            margin: 0px;
        }

        body {
            background-size: auto;
            margin: 0;
        }

        #container {
            display: flex;
            flex-wrap: nowrap;
            justify-content: center;
        }

        #result-area {
            display: flex;
            text-align: center;
            flex-direction: column;
            border: min(0.5vw, 0.5vh) solid #888;
            border-radius: min(2vw, 2vh);
            margin: 10px;

        }

        #result-head {
            border-bottom: min(0.5vw, 0.5vh) solid #888;
        }


        #result {
            list-style: none;
            text-align: center;
            padding-left: 0;
        }

        #input-area {
            border: min(0.5vw, 0.5vh) solid #888;
            border-radius: min(2vw, 2vh);
            display: flex;
            flex-direction: column;
            padding: 5px;
            margin: 10px 10px;
        }

        #button-container {
            text-align: center;
            justify-content: center;
        }

        .input-box {
            margin: 10px 0;
        }

        .input-row {
            margin: 0px 0px 8px 0px;
            background-color: #ddd;
            border-radius: min(2vw, 2vh);

            display: flex;
            flex-direction: column;
        }

        .name-box {
            text-align: center;
            color: white;
            padding: 0;
            border-radius: 15%;
            background-color: grey;
        }

        .input-box {
            display: flex;
            flex-direction: row;
            flex-wrap: nowrap;

            justify-content: center;
            text-align: center;
        }

        .name {
            display: flex;
            flex-direction: row;
            flex-wrap: nowrap;

            justify-content: center;
            margin: 5px 0;
        }

        h1 {
            text-align: center;
        }
    </style>
</head>


<body>
    <header>
        <h1>ポケモンWordleソルバー(β)</h1>
    </header>
    <div id="container">
        <div id="input-area">
            <div class="input-row">
                <div id="name1" class="name">
                    <div id="name1-1" class="name-box">
                    </div>
                    <div id="name1-2" class="name-box">
                    </div>
                    <div id="name1-3" class="name-box">
                    </div>
                    <div id="name1-4" class="name-box">
                    </div>
                    <div id="name1-5" class="name-box">
                    </div>
                </div>
                <div class="input-box"><input id="input1" class="input" type="text" maxlength="5" /></div>
            </div>
            <div class="input-row">
                <div class="name">
                    <div id="name2-1" class="name-box">
                    </div>
                    <div id="name2-2" class="name-box">
                    </div>
                    <div id="name2-3" class="name-box">
                    </div>
                    <div id="name2-4" class="name-box">
                    </div>
                    <div id="name2-5" class="name-box">
                    </div>
                </div>
                <div class="input-box"><input id="input2" class="input" type="text" maxlength="5" /></div>
            </div>
            <div class="input-row">
                <div class="name">
                    <div id="name3-1" class="name-box">
                    </div>
                    <div id="name3-2" class="name-box">
                    </div>
                    <div id="name3-3" class="name-box">
                    </div>
                    <div id="name3-4" class="name-box">
                    </div>
                    <div id="name3-5" class="name-box">
                    </div>
                </div>
                <div class="input-box"><input id="input3" class="input" type="text" maxlength="5" /></div>
            </div>
            <div class="input-row">
                <div class="name">
                    <div id="name4-1" class="name-box">
                    </div>
                    <div id="name4-2" class="name-box">
                    </div>
                    <div id="name4-3" class="name-box">
                    </div>
                    <div id="name4-4" class="name-box">
                    </div>
                    <div id="name4-5" class="name-box">
                    </div>
                </div>
                <div class="input-box"><input id="input4" class="input" type="text" maxlength="5" /></div>
            </div>
            <div class="input-row">
                <div class="name">
                    <div id="name5-1" class="name-box">
                    </div>
                    <div id="name5-2" class="name-box">
                    </div>
                    <div id="name5-3" class="name-box">
                    </div>
                    <div id="name5-4" class="name-box">
                    </div>
                    <div id="name5-5" class="name-box">
                    </div>
                </div>
                <div class="input-box"><input id="input5" class="input" type="text" maxlength="5" /></div>
            </div>
            <div class="input-row">
                <div class="name">
                    <div id="name6-1" class="name-box">
                    </div>
                    <div id="name6-2" class="name-box">
                    </div>
                    <div id="name6-3" class="name-box">
                    </div>
                    <div id="name6-4" class="name-box">
                    </div>
                    <div id="name6-5" class="name-box">
                    </div>
                </div>
                <div class="input-box"><input id="input6" class="input" type="text" maxlength="5" /></div>
            </div>
            <div id="button-container"><button id="button" onclick="solve()">Solve</button></div>

        </div>

        <div id="result-area">
            <div id="result-head">候補</div>
            <ul id="result">&nbsp;</ul>
        </div>
    </div>
</body>

</html>